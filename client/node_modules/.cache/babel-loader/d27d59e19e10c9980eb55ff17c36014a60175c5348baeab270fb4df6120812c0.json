{"ast":null,"code":"import { defineStore } from \"pinia\";\nimport AuthService from \"../../\";\nexport const useAuthStore = defineStore(\"auth\", {\n  state() {\n    return {\n      user: null\n    };\n  },\n  getters: {\n    isUserLoggedIn(state) {\n      return !!state.user && !!state.user.accessToken;\n    }\n  },\n  actions: {\n    loadAuthState() {\n      this.user = JSON.parse(localStorage.getItem(\"user\"));\n    },\n    logout() {\n      this.user = null;\n      localStorage.removeItem(\"user\");\n    },\n    async login(user) {\n      const response = await AuthService.createlogin(user);\n      if (!response.accessToken) {\n        this.logout();\n        throw new Error(\"Whoops, no access token found!\");\n      }\n      this.user = response;\n      localStorage.setItem(\"user\", JSON.stringify(response));\n      return response;\n    },\n    register(user) {\n      this.user = null;\n      return AuthService.createsignup(user);\n    }\n  }\n});","map":{"version":3,"names":["defineStore","AuthService","useAuthStore","state","user","getters","isUserLoggedIn","accessToken","actions","loadAuthState","JSON","parse","localStorage","getItem","logout","removeItem","login","response","createlogin","Error","setItem","stringify","register","createsignup"],"sources":["C:/D/learned/2324_HK1_N4/PhatTrienUngDungWEB_NMT/test/client/src/stores/Auth.store.js"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport AuthService from \"../../\";\r\n\r\nexport const useAuthStore = defineStore(\"auth\", {\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\tuser: null,\r\n\t\t};\r\n\t},\r\n\tgetters: {\r\n\t\tisUserLoggedIn(state) {\r\n\t\t\treturn !!state.user && !!state.user.accessToken;\r\n\t\t},\r\n\t},\r\n\tactions: {\r\n\t\tloadAuthState() {\r\n\t\t\tthis.user = JSON.parse(localStorage.getItem(\"user\"));\r\n\t\t},\r\n\t\tlogout() {\r\n\t\t\tthis.user = null;\r\n\t\t\tlocalStorage.removeItem(\"user\");\r\n\t\t},\r\n\t\tasync login(user) {\r\n\t\t\tconst response = await AuthService.createlogin(user);\r\n\t\t\tif (!response.accessToken) {\r\n\t\t\t\tthis.logout();\r\n\t\t\t\tthrow new Error(\"Whoops, no access token found!\");\r\n\t\t\t}\r\n\t\t\tthis.user = response;\r\n\t\t\tlocalStorage.setItem(\"user\", JSON.stringify(response));\r\n\t\t\treturn response;\r\n\t\t},\r\n\t\tregister(user) {\r\n\t\t\tthis.user = null;\r\n\t\t\treturn AuthService.createsignup(user);\r\n\t\t},\r\n\t},\r\n});\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,OAAOC,WAAW,MAAM,QAAQ;AAEhC,OAAO,MAAMC,YAAY,GAAGF,WAAW,CAAC,MAAM,EAAE;EAC/CG,KAAK,GAAG;IACP,OAAO;MACNC,IAAI,EAAE;IACP,CAAC;EACF,CAAC;EACDC,OAAO,EAAE;IACRC,cAAc,CAACH,KAAK,EAAE;MACrB,OAAO,CAAC,CAACA,KAAK,CAACC,IAAI,IAAI,CAAC,CAACD,KAAK,CAACC,IAAI,CAACG,WAAW;IAChD;EACD,CAAC;EACDC,OAAO,EAAE;IACRC,aAAa,GAAG;MACf,IAAI,CAACL,IAAI,GAAGM,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IACrD,CAAC;IACDC,MAAM,GAAG;MACR,IAAI,CAACV,IAAI,GAAG,IAAI;MAChBQ,YAAY,CAACG,UAAU,CAAC,MAAM,CAAC;IAChC,CAAC;IACD,MAAMC,KAAK,CAACZ,IAAI,EAAE;MACjB,MAAMa,QAAQ,GAAG,MAAMhB,WAAW,CAACiB,WAAW,CAACd,IAAI,CAAC;MACpD,IAAI,CAACa,QAAQ,CAACV,WAAW,EAAE;QAC1B,IAAI,CAACO,MAAM,EAAE;QACb,MAAM,IAAIK,KAAK,CAAC,gCAAgC,CAAC;MAClD;MACA,IAAI,CAACf,IAAI,GAAGa,QAAQ;MACpBL,YAAY,CAACQ,OAAO,CAAC,MAAM,EAAEV,IAAI,CAACW,SAAS,CAACJ,QAAQ,CAAC,CAAC;MACtD,OAAOA,QAAQ;IAChB,CAAC;IACDK,QAAQ,CAAClB,IAAI,EAAE;MACd,IAAI,CAACA,IAAI,GAAG,IAAI;MAChB,OAAOH,WAAW,CAACsB,YAAY,CAACnB,IAAI,CAAC;IACtC;EACD;AACD,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}